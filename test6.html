<html>

<style>
    #highlight {
    color: red;
    font-weight:bold;
}
</style>
<div>
    <h1 id="title"></h1>
    <img id="img"></img>
    <h1 id="desc"></h1>

    <p id="myElement"></p>
</div>

    <script>
        var element = document.getElementById('myElement');

        const titleElement = document.getElementById("title");
        const imgElement = document.getElementById("img");
        const descElement = document.getElementById("desc");
        8593893774759
        getData();
        

        async function getData() {

            const api_url = 'https://edamam-food-and-grocery-database.p.rapidapi.com/parser?upc=8593893774759'

            const options = {
                method: 'GET',
                headers: {
                    'X-RapidAPI-Key': '78cbfacc47msh94ddcb4e6d0fb63p1b387ejsn35e5be18df4c',
                    'X-RapidAPI-Host': 'edamam-food-and-grocery-database.p.rapidapi.com'
                }
            };

                
            


            const response = await fetch(api_url, options);
            const data = await response.json();

            var allergyWords = ['Milk', 'Peanuts', 'Mustard'];
            //console.log(allergyWords);

            var ingredientsElement = data.hints[0].food.foodContentsLabel;
            console.log(ingredientsElement);

            //var ingredientsArray = ingredientsElement.split(' ');
            //console.log(ingredientsArray);

            for (var i = 0; i < allergyWords.length; i++) {
                var regex = new RegExp(allergyWords[i], 'gi');
                ingredientsElement = ingredientsElement.replace(regex, '<span id="highlight">' + allergyWords[i] + '</span>');
            }

/*             for (var i = 0; i < ingredientsArray.length; i++) {
                if (allergyWords.includes(ingredientsArray[i])) {
                    ingredientsArray[i] = '<span id="highlight">' + ingredientsArray[i] + '</span>';
                }
            } */

            //ingredientsElement = ingredientsArray.join(' ');
            element.innerHTML = ingredientsElement;
            
            console.log(data);
            console.log(data.hints);
            console.log(data.hints[0].food.image);

            titleElement.textContent = data.hints[0].food.label;
            imgElement.src = data.hints[0].food.image;
            descElement.textContent = data.hints[0].food.foodContentsLabel;


            }
    </script>
	
    <body>
    </body>

</html>